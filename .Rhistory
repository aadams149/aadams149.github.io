# #   alpha = 0.4,
# #   group = 'Dose 1 Rates'
# # ) +
tm_shape(shapefile_counties) +
tm_polygons(
col = 'socmed',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Social Media: ' = 'socmed',
'Most Recent Tweet: ' = 'Most Recent Tweet'),
popup.format = list(html.escape = F),
title = 'Social Media',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'County Health Dept. Social Media'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'socmed',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Social Media: ' = 'socmed',
'Most Recent Tweet: ' = 'Most Recent Tweet'),
popup.format = list(html.escape = F),
title = 'Social Media',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Health District Social Media'
)
tmap_save(map2, 'district_map.html')
map1 <-
tm_shape(shapefile_counties) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by County'
) +
tm_shape(shapefile_counties) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by County'
) +
tm_shape(shapefile_counties) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by County'
) +
tm_shape(shapefile_counties) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by County'
) #+
tmap_save(map1, 'counties_map.html')
tmap_save(map2, 'district_map.html')
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by District'
) #+
map1
tmaptools::palette_explorer()
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District',
palette = 'magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District',
palette = 'magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District',
palette = 'magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by District',
palette = 'magma'
) #+
map1
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by District',
palette = '-magma'
) #+
map1
tmap_save(map1, 'counties_map.html')
tmap_save(map1, 'counties_map.html')
#Create district-level map of 4 different COVID indicators
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha =
0.4,
group = 'Dose 1 Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'socmed',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Social Media: ' = 'socmed',
'Most Recent Tweet: ' = 'Most Recent Tweet'),
popup.format = list(html.escape = F),
title = 'Social Media',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Health District Social Media'
)
#Save map as html
tmap_save(map1, 'counties_map.html')
rm(map2)
map1
View(counties)
View(covid_today_full)
covid_today_full %>% filter(socmed == 'No Facebook or Twitter') %>% arrange(desc(population))
abc <- covid_today_full %>% filter(socmed == 'No Facebook or Twitter') %>% arrange(desc(population))
View(abc)
length(shapefile %>% filter(in_dstr == 1))
nrow(shapefile %>% filter(in_dstr == 1))
ghi <- covid_today_full %>% filter(socmed == 'Both Facebook and Twitter') %>% arrange(desc(population))
jkl <- covid_today_full %>% filter(socmed == 'Facebook but no Twitter') %>% arrange(desc(population))
mno <- covid_today_full %>% filter(socmed == 'Twitter but no Facebook') %>% arrange(desc(population))
tmap_save(map1, 'counties_map.html')
tmap_save(map1, 'counties_map1.html')
htmlwidgets::saveWidget(map1, 'counties_map2.html')
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by District'
)
tmap_save(map1, 'counties_map.html')
map2 <-
# tm_shape(shapefile_districts) +
# tm_polygons(
#   col = 'cases_adjusted',
#   id = 'name',
#   popup.vars = c('Jurisdiction: ' = 'name_1',
#                  'Cases, Adjusted for Population: ' = 'cases_adjusted'),
#   title = 'Cases, adjusted for population',
#   border.col = 'black',
#   border.alpha = 0.3,
#   alpha = 0.4,
#   group = 'Case Rates'
# ) +
# tm_shape(shapefile_districts) +
# tm_polygons(
#   col = 'deaths_adjusted',
#   id = 'name',
#   popup.vars = c('Jurisdiction: ' = 'name_1',
#                  'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
#   title = 'Deaths, adjusted for population',
#   border.col = 'black',
#   border.alpha = 0.3,
#   alpha = 0.4,
#   group = 'Death Rates'
# ) +
# tm_shape(shapefile_districts) +
# tm_polygons(
#   col = 'comp_vax_adjusted',
#   id = 'name',
#   popup.vars = c('Jurisdiction: ' = 'name_1',
#                  'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
#   title = 'Proportion Fully Vaccinated',
#   border.col = 'black',
#   border.alpha = 0.3,
#   alpha = 0.4,
#   group = 'Complete Vaccination Rates'
# ) +
# # tm_shape(shapefile_districts) +
# # tm_polygons(
# #   col = 'first_dose_adjusted',
# #   id = 'name',
# #   popup.vars = c('Jurisdiction: ' = 'name_1',
# #                  'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
# #   title = 'Proportion, First Dose',
# #   border.col = 'black',
# #   border.alpha = 0.3,
# #   alpha = 0.4,
# #   group = 'Dose 1 Rates'
# # ) +
tm_shape(shapefile_counties) +
tm_polygons(
col = 'socmed',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Social Media: ' = 'socmed',
'Most Recent Tweet: ' = 'Most Recent Tweet'),
popup.format = list(html.escape = F),
title = 'Social Media',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'County Health Dept. Social Media'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'socmed',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name_1',
'Social Media: ' = 'socmed',
'Most Recent Tweet: ' = 'Most Recent Tweet'),
popup.format = list(html.escape = F),
title = 'Social Media',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Health District Social Media'
)
tmap_save(map2, 'district_map.html')
map1 <-
tm_shape(shapefile_districts) +
tm_polygons(
col = 'cases_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Cases, Adjusted for Population: ' = 'cases_adjusted'),
title = 'Cases, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Case Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'deaths_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Deaths, Adjusted for Population: ' = 'deaths_adjusted'),
title = 'Deaths, adjusted for population',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Death Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'comp_vax_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County Fully Vaccinated: ' = 'comp_vax_adjusted'),
title = 'Proportion Fully Vaccinated',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Vax Rates by District',
palette = '-magma'
) +
tm_shape(shapefile_districts) +
tm_polygons(
col = 'first_dose_adjusted',
id = 'name',
popup.vars = c('Jurisdiction: ' = 'name',
'Proportion of County, 1st Dose: ' = 'first_dose_adjusted'),
title = 'Proportion, First Dose',
border.col = 'black',
border.alpha = 0.3,
alpha = 0.4,
group = 'Dose 1 Rates by District',
palette = '-magma'
)
tmap_save(map1, 'counties_map.html')
